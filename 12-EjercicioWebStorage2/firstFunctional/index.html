<!DOCTYPE html>
<html>
  <head>
	<style>
		body {
			display: flex;
			justify-content: center;
			align-items: center;
			
		}
		.center {
			width: 350px;
			height: 200px;
			border:3px solid black;
		}
		
		#formulario{
			padding: 50px;
		}
		
		button{
			float: right;
		}
		
		
	</style> 
  </head>
  <body>
	<div class = "center">
	<button type="submit" form="formulario" value="submit">O</button>
    <form id="formulario"> 
        Campo 1: <input type="text" id="campo1" /> <br>
		Campo 2: <input type="text" id="campo2" /> <br>
		Campo 3: <input type="text" id="campo3" /> <br>
		Campo 4: <input type="text" id="campo4" /> <br>
    </form>
	</div>
    <script>
	
      var send = document.querySelector("#formulario");
	  var campos = [];
	  
	  if (typeof(Storage) !== "undefined") {
			//window.localStorage.length
	  
	  
		for(var i = 0; i<4; i++) {
			
			var campo = "campo" + (i+1);
			/*
			if (localStorage.getItem(campo) === null) {
				campos[i] =  document.getElementById(campo).value;
				localStorage.setItem(campo,campos[i]);
			}else{
				document.getElementById(campo).value = localStorage.getItem(campo);
			}*/
			if (localStorage.getItem(campo) === "") {
				console.log("ITS NULL BIATCH");
				campos[i] = document.getElementById(campo).value;
				//document.getElementById(campo).value = localStorage.getItem(campo);
			}else{
				console.log("ITS NOT NULL BIATCH");
				campos[i] = localStorage.getItem(campo);
				document.getElementById(campo).value = campos[i];
			}
			//campos[i] =  document.getElementById(campo).value;
			localStorage.setItem(campo,campos[i]);
			console.log(campo + " : "+ localStorage.getItem(campo));
			//localStorage.setItem(campo,campos[i]);
		}
		
	
		} else {
			console.log("El navegador no soporta WebStorage");
		}
	  
		send.onsubmit = function () {
			//mi_worker.postMessage(numero.value);
			/*
			var y = window.outerHeight / 2 + window.screenY - ( 200 / 2);
			var x = window.outerWidth / 2 + window.screenX - ( 350 / 2);
			window.open('popup.html','_blank','top=' + y + ', left=' + x',width=350 ,height=200');
			*/
			for(var i = 0; i<4; i++) {
				var campo = "campo" + (i+1);
				localStorage.setItem(campo,document.getElementById(campo).value);
			}
			
			var h = 200;
			var w = 350;
			var y = window.outerHeight / 2 + window.screenY - (h/2)
			var x = window.outerWidth / 2 + window.screenX - (w/2)
			return window.open('popup.html', "PopUp", 'toolbar=no, width=' + w + ', height=' + h + ', top=' + y + ', left=' + x);
			
			var h = 200;
			var w = 350;
			
		};
	
    </script>
  </body>
</html>
