<!DOCTYPE html>
<html>
  <head>
  <style>
		body {
			display: flex;
			justify-content: center;
			align-items: center;
			
		}
		.center {
			width: 350px;
			height: 200px;
			border:3px solid black;
		}
		
		#formulario2{
			padding: 45px;
		}
		
		button{
			float: left;
		}
	</style> 
	<script language="Javascript">

        function redirectToFB(){
            window.opener.location.href="http://wwww.facebook.com";
            self.close();
        }

    </script>
	
	

  </head>
  <body>
	<div class = "center">
    <form id="formulario2"> 
        Campo 1: <input type="text" id="campo1" /> <br>
		Campo 2: <input type="text" id="campo2" /> <br>
		Campo 3: <input type="text" id="campo3" /> <br>
		Campo 4: <input type="text" id="campo4" /> <br>
		<button id = "close" >Cerrar</button>
		<!--<button id = "close">Cerrar</button>-->
		<input type="button" value="Ok" OnClick="redirectToFB()" />
    </form>
	</div>
    <script>
	
	
	var close = document.querySelector("#formulario2");
	var campos = [];
	
	function checkStorage(){
		if (typeof(Storage) !== "undefined") {
			for(var i = 0; i<4; i++) {
				var campo = "campo" + (i+1);
				if (localStorage.getItem(campo) === null) {
					console.log("ITS NULL BIATCH");
					campos[i] = document.getElementById(campo).value;
				}else{
					console.log("ITS NOT NULL BIATCH");
					campos[i] = localStorage.getItem(campo);
					document.getElementById(campo).value = campos[i];
				}
				localStorage.setItem(campo,campos[i]);
				console.log(campo + " : "+ localStorage.getItem(campo));
			}
		} else {
			console.log("El navegador no soporta WebStorage");
		}
	}
	function save(){
		for(var i = 0; i<4; i++) {
			var campo = "campo" + (i+1);
			//var c = "c" + (i+1);
			localStorage.setItem(campo,document.getElementById(campo).value);
		}
		//checkStorage();	
	}
		
	close.onsubmit = function () {
		save();
		var ventana= window.open('', '_self','width=');
		ventana.focus();
		ventana.close();
	};
	checkStorage();
	
	  
    </script>
  </body>
</html>
